<!--pages/index.wxml-->
<view class="container">
  <!-- 分组切换 tab 栏 -->
  <view class="group-tabs">
    <scroll-view scroll-x="true" class="tabs-scroll">
      <view class="tabs-wrapper">
        <view
          class="tab-item {{currentGroupId === item.id ? 'active' : ''}}"
          wx:for="{{groups}}"
          wx:key="id"
          data-groupid="{{item.id}}"
          bindtap="switchGroup"
        >
          <view class="tab-name" style="color: {{currentGroupId === item.id ? item.color : '#666666'}}">
            {{item.name}}
          </view>
          <view class="tab-count" style="background-color: {{currentGroupId === item.id ? item.color : '#f5f5f5'}}; color: {{currentGroupId === item.id ? '#ffffff' : '#999999'}}">
            {{item.imageCount}}
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- textarea -->
  <textarea placeholder="请输入点什么" placeholder-class="placeholder-class"></textarea>
  <view class="image-drag-container">
    <movable-area class="movable-area" style="min-height:{{imageWitdh}}px;height:{{areaHeight}}px">
      <view class="image-choose-container">
        <view class="image-item" style="width:{{imageWitdh}}px;height:{{imageWitdh}}px" wx:for="{{images}}" wx:for-item="url" wx:key="url" data-url="{{url}}" data-index="{{index}}" bindlongpress='handleLongTap' bindtouchend='handleTouchEnd' catchtouchmove='handleTouchMove' >
        <image src="{{url}}" mode="aspectFill" bindtap="handlePreview" data-index="{{index}}" data-url="{{url}}"></image>
        <view class="close" bindtap="handleDelete" data-index="{{index}}">X</view>
      </view>
      <view class="add-button" style="width:{{imageWitdh}}px;height:{{imageWitdh}}px" wx:if="{{images.length >= 0 &&images.length < 9}}" bindtap="handleChooseImage">+</view>
       <view style="width:{{imageWitdh}}px" class="image-item image-item-temp" wx:if="{{images.length%3==1}}"></view>
      </view>
      <movable-view class="movable-view" style="width:{{imageWitdh}}px;height:{{imageWitdh}}px" hidden="{{hidden}}" x="{{x}}" y="{{y}}"  direction="all" damping="{{5000}}" friction="{{1}}">
        <image src="{{currentImg}}" wx:if="{{currentImg.length>0}}"></image>
      </movable-view>
    </movable-area>
  </view>
  <button>发布</button>
</view>
